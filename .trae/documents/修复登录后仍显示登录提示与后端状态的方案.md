## 问题判断
- 顶栏与仪表盘依赖 `user` 是否存在来显示“登录/登录提示”（`src/components/Layout.tsx:159-166`、`src/pages/Dashboard.tsx:236-252`）。当后端未启动或 `getUserInfo` 失败时，虽有 `auth_token`（登录成功），`user` 仍为空，导致仍显示“登录”。这是前端逻辑问题。
- 后端状态页“Failed to fetch”（`src/pages/Backend.tsx:20-24`）为网络/后端未启动导致，并非功能性 Bug；当前开发环境使用 Mock 登录，仅对登录/注册做了 Mock，版本接口未 Mock，显示失败属预期。

## 修复目标
- 登录后（存在 `auth_token`）顶栏与仪表盘均显示已登录态，顶栏展示账户名下拉菜单，不再出现“登录/立即登录”提示。
- 后端状态页在网络失败时显示“后端未启动或不可达”的清晰提示。

## 代码改动
1) 顶栏逻辑改造
- `src/components/Layout.tsx`：
  - 引入 `authed = !!localStorage.getItem('auth_token')`；
  - 显示账户名下拉菜单的条件改为 `authed`（而非 `user`），菜单名使用 `(user?.nick_name || user?.email || '账户')`。
  - 继续保留 `fetchUser()` 仅在 `authed && !user` 时尝试补齐资料。

2) 仪表盘提示改造
- `src/pages/Dashboard.tsx`：
  - 登录提示的条件从 `!user` 改为 `!authed`；
  - 统计与图表块的条件从 `user` 改为 `authed`，避免后端不可达时仍显示未登录提示。

3) 后端状态页提示改造
- `src/pages/Backend.tsx`：
  - 捕获网络错误时文案统一为“后端未启动或不可达”；
  - 保持刷新逻辑，显示 `API_BASE`，用户可通过 Docker 启动后端。

## 验证
- 登录后刷新页面：顶栏显示账户名下拉菜单；仪表盘无“立即登录”卡片。
- 后端关闭：状态页显示“后端未启动或不可达”，刷新后仍清晰提示。

## 影响面与风险
- 仅前端展示逻辑调整，数据与安全策略不变；
- 在后端恢复后，`fetchUser` 会自动补齐账户资料，菜单名称从邮箱/占位切换为昵称。